# Copyright 2013 Jakob Nixdorf <flocke@shadowice.org>
# Distributed under the terms of the GNU General Public License v2

require pypi [ suffix=zip ] setuptools [ python_dep='[>=2.7]' ]

SUMMARY="Store and access your passwords safely."
DESCRIPTION="
Provides easy access to safe password storage services from python applications.
Supports the KDE Wallet, GNOME Keyring and the newer Secret Service API as backends
as well as the native CryptFile and UncryptFile storage.
"

LICENCES="PSF"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
    test:
        dev-python/fs[python_abis:*(-)?]
        dev-python/gdata[python_abis:*(-)?]
        dev-python/keyczar[python_abis:*(-)?]
        dev-python/mock[python_abis:*(-)?]
        dev-python/pycrypto[python_abis:*(-)?]
        dev-python/pytest[python_abis:*(-)?]
        dev-python/pytest-runner[python_abis:*(-)?]
    suggestion:
        (
            gnome-bindings/pygobject:3
            gnome-desktop/libgnome-keyring:1[gobject-introspection]
        ) [[ *description = [ Used to store passwords in the Gnome Keyring ] *group-name = [ gnome-keyring ] ]]
        kde/pykde4:4 [[ description = [ Used to store passwords in the KDE Wallet ] ]]
"

BUGS_TO="flocke@shadowice.org"

# TODO
#  missing multipy: dev-python/gdata, dev-python/mock, gnome-bindings/pygobject:3, kde/pykde4:4

# Use pytest-runner for testing
src_test() {
    edo ${PYTHON} -B setup.py ptr
}

